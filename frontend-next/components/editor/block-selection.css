/* Block Selection CSS for BlockNote Editor */

/* Cmd+A selected blocks - support both BlockNote class patterns */
.bn-block-outer.all-selected,
.bn-block-outer[data-all-selected="true"],
[data-node-type="blockContainer"].all-selected,
[data-node-type="blockContainer"][data-all-selected="true"] {
  background-color: rgba(35, 131, 226, 0.2) !important;
  border-radius: 4px;
}

.dark .bn-block-outer.all-selected,
.dark .bn-block-outer[data-all-selected="true"],
.dark [data-node-type="blockContainer"].all-selected,
.dark [data-node-type="blockContainer"][data-all-selected="true"] {
  background-color: rgba(35, 131, 226, 0.3) !important;
}

/* Drag selection visual feedback - support both BlockNote class patterns */
.bn-block-outer.drag-selected,
.bn-block-outer[data-drag-selected="true"],
[data-node-type="blockContainer"].drag-selected,
[data-node-type="blockContainer"][data-drag-selected="true"] {
  background-color: rgba(35, 131, 226, 0.2) !important;
  border-radius: 4px;
  transition: background-color 0.1s ease;
}

.dark .bn-block-outer.drag-selected,
.dark .bn-block-outer[data-drag-selected="true"],
.dark [data-node-type="blockContainer"].drag-selected,
.dark [data-node-type="blockContainer"][data-drag-selected="true"] {
  background-color: rgba(35, 131, 226, 0.3) !important;
}

/* Selection rectangle during drag */
.block-selection-rect {
  position: fixed;
  background-color: rgba(35, 131, 226, 0.1);
  border: 1px solid rgba(35, 131, 226, 0.5);
  border-radius: 3px;
  pointer-events: none;
  z-index: 1000;
}

.dark .block-selection-rect {
  background-color: rgba(35, 131, 226, 0.15);
  border-color: rgba(35, 131, 226, 0.6);
}

/* Remove text selection when blocks are selected */
.blocks-selected .bn-editor {
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* Prevent text selection during block selection drag */
body.block-selecting {
  user-select: none !important;
  -webkit-user-select: none !important;
  cursor: default !important;
}

body.block-selecting * {
  user-select: none !important;
  -webkit-user-select: none !important;
}

body.block-selecting .bn-editor {
  cursor: default !important;
}

body.block-selecting [contenteditable] {
  cursor: default !important;
  caret-color: transparent !important;
}

/* Page block selected - non-editable state */
.bn-block-outer[data-page-block-selected="true"] [contenteditable] {
  caret-color: transparent !important;
  cursor: default !important;
}

.bn-block-outer[data-page-block-selected="true"] .bn-inline-content {
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* Page blocks (blocks containing /page/ links) - always hide cursor */
/* These are navigational elements, not editable content */
/* Also prevent text selection so drag selection skips over them */
/* Using :has() selector to target blocks containing page links without data attributes */
.bn-block-outer:has(a[href^="/page/"]) {
  user-select: none !important;
  -webkit-user-select: none !important;
}

.bn-block-outer:has(a[href^="/page/"]) [contenteditable] {
  caret-color: transparent !important;
  cursor: pointer !important;
  user-select: none !important;
  -webkit-user-select: none !important;
}

.bn-block-outer:has(a[href^="/page/"]) .bn-inline-content {
  cursor: pointer !important;
  caret-color: transparent !important;
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* Hide cursor in page block text - target the actual text node container */
.bn-block-outer:has(a[href^="/page/"]) [data-content-type="paragraph"] {
  caret-color: transparent !important;
}

.bn-block-outer:has(a[href^="/page/"]) .bn-block-content {
  caret-color: transparent !important;
}

/* Fallback for data attribute if set */
.bn-block-outer[data-is-page-block="true"] {
  user-select: none !important;
  -webkit-user-select: none !important;
}

.bn-block-outer[data-is-page-block="true"] [contenteditable] {
  caret-color: transparent !important;
  cursor: pointer !important;
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* Block drag reorder styles */
.block-drag-ghost {
  position: fixed;
  pointer-events: none;
  z-index: 1001;
  opacity: 0.8;
  background-color: var(--background);
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 8px 12px;
  font-size: 14px;
  color: var(--foreground);
}

.dark .block-drag-ghost {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.block-drop-indicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background-color: #2383e2;
  pointer-events: none;
  z-index: 1000;
  border-radius: 1px;
}

body.block-dragging {
  cursor: grabbing !important;
}

body.block-dragging * {
  cursor: grabbing !important;
}
